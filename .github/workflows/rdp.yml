
name: üñ•Ô∏è Free Windows RDP

on:
  workflow_dispatch:

jobs:
  rdp:
    runs-on: windows-latest
    timeout-minutes: 360
    
    steps:
    - name: üîß Enable RDP
      run: |
        # Enable Remote Desktop
        Set-ItemProperty -Path "HKLM:\System\CurrentControlSet\Control\Terminal Server" -Name "fDenyTSConnections" -Value 0
        Enable-NetFirewallRule -DisplayGroup "Remote Desktop"
        
    - name: üë§ Create User
      run: |
        # Create user with simple password
        net user RDPUser Password123! /add /y
        net localgroup administrators RDPUser /add
        net localgroup "Remote Desktop Users" RDPUser /add
        
    - name: üåê Get IP Address
      run: |
        # Get the public IP
        $ip = Invoke-RestMethod -Uri "https://api.ipify.org"
        Write-Host "=== RDP ACCESS ==="
        Write-Host "IP Address: $ip"
        Write-Host "Username: RDPUser"
        Write-Host "Password: Password123!"
        Write-Host "=================="
        
    - name: üîÑ Keep Active
      run: |
        # Keep the session alive
        while ($true) {
          Write-Host "[$(Get-Date)] RDP Session Active - GitHub IP"
          Write-Host "Use the IP above in Remote Desktop"
          Write-Host "Press Ctrl+C in workflow to stop"
          Start-Sleep -Seconds 60
        }
